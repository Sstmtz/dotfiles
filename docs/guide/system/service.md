# Service

## Ananicy Cpp

[Ananicy](https://github.com/Nefelim4ag/Ananicy) (ANother Auto NICe daemon) — is a shell daemon created to manage processes' IO and CPU priorities, with community-driven set of rules for popular applications (anyone may add their own rule via github's pull request mechanism). It's mainly for desktop usage.

> [!WARNING]
> Ananicy had been archived by the owner on Oct 24, 2023.

[Ananicy CPP](https://gitlab.com/ananicy-cpp/ananicy-cpp) is a fork of the daemon of the same name that distributes task priorities. Its installation significantly improves system responsiveness. Unlike the original Ananicy, this fork is completely rewritten in C++, which results in an increase in performance.

```sh
sudo pacman -S ananicy-cpp
sudo systemctl enable --now ananicy-cpp
```

In addition, it is recommended to install the prepared, larger rule set for ananicy-cpp.

```sh
git clone https://aur.archlinux.org/cachyos-ananicy-rules-git.git
cd cachyos-ananicy-rules-git
makepkg -sric
sudo systemctl restart ananicy-cpp
```

> [!WARNING]
> When using any of the schedulers from the `sched-ext` framework, it’s strongly advised to disable and avoid using `ananicy-cpp` due to possible conflicts because it amplifies the priority gap that the scheduler is already creating/handling by boosting interactive tasks creating an excessive prioritization starving other tasks increasing the chance of hitting the sched_ext watchdog timeout kicking the running scheduler aka causing an stall. please refer to [wiki.cachyos.org: sched-ext#disbale-ananicy-cpp](https://wiki.cachyos.org/configuration/sched-ext/#disable-ananicy-cpp).

---

## Irqbalance

[Irqbalance](https://github.com/Irqbalance/irqbalance) is a daemon to help balance the cpu load generated by interrupts across all of a systems cpus. Irqbalance identifies the highest volume interrupt sources, and isolates each of them to a single unique cpu, so that load is spread as much as possible over an entire processor set, while minimizing cache miss rates for irq handlers.

```sh
sudo pacman -S irqbalance
sudo systemctl enable --now irqbalance
```

---

## systemd-oomd

The OOM killer is a special daemon that prevents the occurrence of so-called OOM (Out-Of-Memory) situations. In simple terms, it kills the "heaviest" process in a group of processes (cgroup) before it consumes all the memory and causes your computer to hang. The Linux kernel already has a built-in OOM killer, but it has a slow response time, so it is better to use a user-space OOM killer. The system initialization system systemd offers a built-in OOM killer - `systemd-oomd`, which is characterized by low resource consumption in the background and does not create the CPU load that other OOM killers do due to tracking the memory consumption of processes without using the PSI mechanism provided by the Linux kernel. Therefore, it is recommended to use it. You can enable it with the following command:

```sh
sudo systemctl enable --now systemd-oomd
```

---

## References

- [AUR: recommended-servies](https://ventureo.codeberg.page/source/services.html#recommended-servies)
- [man.archlinux.org: systemd-oomd](https://man.archlinux.org/man/systemd-oomd.service.8.en)
